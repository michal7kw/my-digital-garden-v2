{#
  Entity Badge Component
  Displays a color-coded badge showing the entity type

  Usage:
  {% include "components/entityBadge.njk" %}

  Expected context:
  - entityType: The entity type (biomarker, drug, supplement, etc.)

  Optional:
  - badgeSize: "small", "normal" (default), or "large"
  - badgeStyle: "filled" (default) or "outline"
#}

{% set type = entityType or page.data['dg-entity-type'] or page.data.type %}
{% set size = badgeSize | default('normal') %}
{% set style = badgeStyle | default('filled') %}

{# Entity type icons #}
{% set entityIcons = {
  'biomarker': 'ğŸ§ª',
  'drug': 'ğŸ’Š',
  'supplement': 'ğŸŒ¿',
  'condition': 'ğŸ¥',
  'intervention': 'âš•ï¸',
  'hormone': 'ğŸ§¬',
  'organ': 'ğŸ«€',
  'metabolite': 'âš™ï¸',
  'gene': 'ğŸ§¬',
  'protein': 'ğŸ”¬',
  'neurotransmitter': 'âš¡',
  'cellularcomponent': 'ğŸ”¬',
  'clinicalpattern': 'ğŸ“Š',
  'cognitivefunction': 'ğŸ§ ',
  'examination': 'ğŸ©º',
  'labtest': 'ğŸ”¬',
  'labtestpanel': 'ğŸ“‹',
  'pathway': 'ğŸ”€',
  'phenotype': 'ğŸ‘¤',
  'research': 'ğŸ“š'
} %}

{% if type %}
  {% set typeIcon = entityIcons[type | lower] or 'ğŸ“„' %}
  {% set sizeClass = 'small' if size == 'small' else ('large' if size == 'large' else '') %}
  {% set styleClass = 'outline' if style == 'outline' else '' %}

  <span class="entity-badge {{ type | lower }} {{ sizeClass }} {{ styleClass }}" data-entity-type="{{ type | lower }}">
    <span class="badge-icon">{{ typeIcon }}</span>
    <span class="badge-text">{{ type | capitalize }}</span>
  </span>
{% endif %}
